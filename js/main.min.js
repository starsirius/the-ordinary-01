/* ========================================================================
 * The Ordinary #1 event page javascript
 * https://github.com/starsirius/the-ordinary-01
 *
 * Copyright 2013 Chung-Yi Chi
 * cychi1210@gmail.com
 * ======================================================================== */(function(e){"use strict";function l(t,n,r,i){function s(e,t){var n,r,i,s,o;r=/(?:\{{2})([\w\[\]\.]+)(?:\}{2})/,n=e;while(r.test(n))i=n.match(r)[1],s=t.hasOwnProperty(i)?t[i]:"",n=n.replace(r,""+s);return n}var i=i||'<a href="{{link}}" target="_blank"><img src="{{image}}" class="gallery-item"></a>';e.get(r,function(r){var o="",u="",a,f;for(a=0;a<r.data.length;a++)f=r.data[a],u=s(i,{model:f,id:f.id,link:f.link,image:f.images.thumbnail.url,caption:f.caption?f.caption.text:"",likes:f.likes.count,comments:f.comments.count}),o+=u;e(t).append(o),e(n).attr("data-api-url",r.pagination.next_url||""),r.pagination.hasOwnProperty("next_url")||e(n).hide()},"jsonp")}e("#countdown").countdown({date:"2013-12-28T12:00:00.000+08:00",onComplete:function(){e("#coming-soon").removeClass("show").addClass("hidden"),e("#participate").removeClass("hidden").addClass("show"),e("#menu-go").removeClass("hidden").addClass("show")}}),e("audio").mediaelementplayer({features:["playpause"],alwaysShowControls:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,success:function(t,n,r){var i=e(r.controls).find(".mejs-playpause-button > button"),s=e(r.container).closest(".step").find(".btn-next");i.addClass("icon-play"),e(t).on("playing",function(){i.removeClass("icon-play").addClass("icon-pause")}),e(t).on("pause ended",function(){i.removeClass("icon-pause").addClass("icon-play")}),e(t).on("ended",function(){i.addClass("btn-secondary"),s.removeClass("hidden")})}}),e("[data-toggle=tab]").click(function(){var t=e(this).closest(".navbar-collapse");t.hasClass("in")&&t.collapse("hide")}),e(".btn-participate").click(function(){e('a[data-toggle="tab"][href="#go"]').tab("show")}),e(".btn-view-gallery").click(function(){e('a[data-toggle="tab"][href="#my-path"]').tab("show")}),e("h1").delay(300).animate({opacity:1,top:0},700),e(".preface").delay(500).animate({opacity:1,top:0},700),e(".action").delay(1e3).animate({opacity:1,top:0},700),e(".step").each(function(t){var n=e(this).find(".btn-next"),r=e(this),i=r.next();t>0&&r.hide(),i.length>0&&n.click(function(){r.hide(),i.show()})});var t=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),n=/(Android)/g.test(navigator.userAgent);t?e(".btn-pic-ios").show():n&&e(".btn-pic-android").show();var r="theordinary01",i=30,s="8738482a23134b12a365afc165e722fb",o="https://api.instagram.com/v1/",u={tag:"tags/"+r,recent_media_with_tag:"tags/"+r+"/media/recent"},a=o+u.tag+"?client_id="+s,f=o+u.recent_media_with_tag+"?count="+i+"&client_id="+s;e.get(a,function(t){e("#media_count").text(t.data.media_count),e("#hash_tag").text(r)},"jsonp"),l("#gallery","#view-more",f),e("#view-more").click(function(t){var n=e(this).attr("data-api-url");t.preventDefault(),l("#gallery","#view-more",n)})})(jQuery);